## NBT Minecraft
Материал подготовлен [Rikonardo](https://www.youtube.com/channel/UCAfPECGsDFaYJP8lXGv5opA "Rikonardo"). Информация взята [отсюда](https://minecraft-ru.gamepedia.com/Формат_NBT).<br/>
Обратите внимание - данный гайд подготовлен для версий игры **выше 1.13**! Примеры использования NBT тегов в предыдущих версиях могут отличаться от приведённых в статье!

------------

### Что такое NBT?

**Формат NBT** (от англ. _Named Binary Tag_ — «именованный двоичный тег») используется _Minecraft_ в различных файлах для хранения данных. Формат описан Нотчем в очень краткой [спецификации](http://web.archive.org/web/20110723210920/http://www.minecraft.net/docs/NBT.txt). Формат разработан для хранения данных в структуре-дереве, состоящей из различных тегов. У каждого тега есть идентификатор и название.
#### Из спецификации:
NBT (именованный двоичный тег) - это двоичный формат на основе тегов, предназначенный для переноса больших объемов двоичных данных с меньшими объемами дополнительных данных.
Ячейка именованного тега имеет следующий формат:

| Тип | Описание |
| ------------ | ------------ |
| byte _tagType_ | Тип тега, хранимый в формате `byte`, означает тип данных содержащихся в ячейке (поле `payload`) |
| TAG_String _name_ | Название ячейки |
| [payload] | Информация, хранимая в ячейке |

### Как это работает?

Давайте представим себе следующую ситуацию: нам нужно сохранить 3 параметра о предмете, а именно <u>числовое</u> `id` (идентификатор предмета), <u>строковое</u> `name` (название предмета), <u>логическое</u> `isMagic` (является ли предмет магическим).
Визуально результат будет выглядеть так:

| byte _tagType_ | TAG_String _name_ | [payload] |
|------------|------------|------------|
| TAG_**Int** | id | 122 |
| TAG_**String** | name | "Magic crystal" |
| TAG_**Byte** | isMagic | 1 |
Или в приблизительном переводе в json:
```json
{
	"id": 122,
	"name": "Magic crystal",
	"isMagic": true
}
```
### Список возможных типов данных для NBT-тега

| Тип | Содержимое | Описание |
|------------|------------|------------|
| TAG_**End** | Нет. | Используется для обозначения конца составных тегов. У этого тега нет названия, поэтому он всегда представлен одним байтом, равным 0. Также этот тип используется в пустых тегах списков. |
| TAG_**Byte** | 1 байт / 8 битов, со знаком | Целочисленный тип со знаком. Иногда используется для логических переменных. |
| TAG_**Short** | 2 байта / 16 битов, со знаком, обратный порядок байтов | Целочисленный тип со знаком. |
| TAG_**Int** | 4 байта / 32 бита, со знаком, обратный порядок байтов | Целочисленный тип со знаком. |
| TAG_**Long** | 8 байт / 64 бита, со знаком, обратный порядок байтов. | Целочисленный тип со знаком. |
| TAG_**Float** | 4 байта / 32 бита, со знаком, обратный порядок байтов, IEEE 754-2008, binary32 | Тип чисел с плавающей точкой со знаком. |
| TAG_**Double** | 8 байт / 64 бита, со знаком, обратный порядок байтов, IEEE 754-2008, binary64 | Тип чисел с плавающей точкой со знаком. |
| TAG_**Byte**_**Array** | Один TAG_Int, обозначающий  _размер_, затем  _размер_  тегов TAG_Byte. | Массив байтовых переменных. |
| TAG_**String** | Один TAG_Short, обозначающий  _длину_, затем строка в формате UTF-8 с размером  _длина_. | Строка в формате UTF-8. Она имеет размер, а не завершается нулём. |
| TAG_**List** | Один TAG_Byte, обозначающий  _тип_, затем TAG_Int, обозначающий  _размер_, затем  _размер_  тегов типа  _тип_. | Список нагрузок тегов без ID и без названий. |
| TAG_**Compound** | Полные теги, затем один тег TAG_End. | Список полных тегов, включающий их типы, названия и содержимые. Все теги должны иметь различные имена. |
| TAG_**Int**_**Array** | Один TAG_Int, обозначающий  _размер_, затем  _размер_  тегов TAG_Int. | Массив тегов TAG_Int. |

### Структура
Структура дерева NBT очень похожа на структуру JSON, и для использования NBT в командах используется именно псевдо-JSON. Вот пример подачи информации о предмете в виде JSON-подобной структуры:
```json
{атрибут1:123,атрибут2:"какой-то текст",атрибут3:{податрибут1:456,податрибут2:["элемент списка 1", 2]}}
``` 
В развёрнутом виде:
```json
{
	атрибут1:123,
	атрибут2:"какой-то текст",
	атрибут3:
	{
		податрибут1:456,
		податрибут2:
		[
			"элемент списка 1",
			2
		]
	}
}
``` 
А вот пример с реальным блоком:
```
{id:"stone",Count:3, tag:{Name:"your name"}}
```
Вложенное в `{}` - объект, для выборки элементов в котором используется текстовое название объекта.
Вложенное в `[]` - список, элементы в нём не имеют никаких видимых селекторов, но по факту для выборки используются номера элементов в списке.

### Пример использования
Получить палку с название "Палка неправды":
```
/give @p minecraft:stick{display:{Name:"Палка неправды"}}
```
**Полный список параметров на английском можно найти [здесь](https://minecraft.gamepedia.com/Tutorials/Command_NBT_tags).**
